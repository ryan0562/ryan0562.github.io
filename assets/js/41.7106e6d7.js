(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{517:function(e,n,t){"use strict";t.r(n);var a=t(2),o=Object(a.a)({},(function(){var e=this,n=e._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"å‰ç«¯è·¨é¡µé¢é€šä¿¡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å‰ç«¯è·¨é¡µé¢é€šä¿¡"}},[e._v("#")]),e._v(" å‰ç«¯è·¨é¡µé¢é€šä¿¡")]),e._v(" "),n("h2",{attrs:{id:"èƒŒæ™¯"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#èƒŒæ™¯"}},[e._v("#")]),e._v(" èƒŒæ™¯")]),e._v(" "),n("p",[e._v("ç”¨æˆ·åœ¨å®é™…çš„æ“ä½œåœºæ™¯ä¸­ä¼šæ‰“å¼€å¤šä¸ª Tab é¡µé¢Aã€Bã€Cã€Dã€E...ã€‚å½“ç”¨æˆ·åœ¨ E Tab é¡µé€€å‡ºç™»å½•ï¼Œå¹¶ä¸”ç™»å½•åˆ°æ–°çš„è´¦å·ï¼Œç„¶åç”¨æˆ·åˆ‡æ¢åˆ°é E çš„ Tab æ—¶ï¼Œå‘ç°ç™»å½•ä¿¡æ¯æ²¡æœ‰åˆ·æ–°ï¼Œ å¹¶ä¸”ç”±äºç™»å½•ä¿¡æ¯æ²¡æœ‰åˆ·æ–°ï¼Œä¼šå‡ºç°æ“ä½œå¼‚å¸¸ã€‚è¿™ä¸ªé—®é¢˜ç®€å•æ¥è¯´å°±æ˜¯å¤šä¸ª Tab ä¿¡æ¯æ²¡æœ‰åŒæ­¥ã€‚é—®é¢˜çš„å…³é”®åœ¨äºä¸€ä¸ª Tab é€€å‡ºé‡æ–°ç™»å½•ï¼Œéœ€è¦é€šçŸ¥åˆ°å…¶ä»–çš„ Tab åˆ·æ–°åˆ°æœ€æ–°çš„ä¿¡æ¯ã€‚æœ¬è´¨é—®é¢˜å°±æ˜¯"),n("strong",[e._v("è§£å†³å‰ç«¯è·¨é¡µé¢é€šä¿¡")]),e._v("ã€‚")]),e._v(" "),n("p",[e._v("æœ¬ç¯‡æ–‡ç« å°±æ˜¯å¯¹å‰ç«¯è·¨é¡µé¢é€šä¿¡çš„è§£å†³æ–¹æ¡ˆåšäº†ä¸€ä¸ªäº†è§£ã€‚")]),e._v(" "),n("h2",{attrs:{id:"onstorage"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#onstorage"}},[e._v("#")]),e._v(" onstorage")]),e._v(" "),n("p",[e._v("WindowEventHandlers.onstorage å±æ€§åŒ…å«ä¸€ä¸ªåœ¨ storage äº‹ä»¶è§¦å‘æ—¶è¿è¡Œçš„äº‹ä»¶å¤„ç†ç¨‹åºã€‚å½“æ›´æ”¹å­˜å‚¨æ—¶ä¼šè§¦å‘äº‹ä»¶å¤„ç†ç¨‹åºã€‚")]),e._v(" "),n("h3",{attrs:{id:"è¯­æ³•"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è¯­æ³•"}},[e._v("#")]),e._v(" è¯­æ³•")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("window.onstorageÂ =Â functionï¼ˆï¼‰{...};\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â \nwindow.onstorageÂ =Â function(e)Â {\nÂ Â console.log(`TheÂ ${e.key}Â Â keyÂ hasÂ beenÂ changedÂ fromÂ ${e.oldValue}Â Â toÂ Â ${e.newValue}Â .`);\n};\n\n")])])]),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("<divÂ id=\"app\"></div>\n<buttonÂ id=\"tab\">æ–°å¼€Â Tab</button>\n<buttonÂ id=\"l-btn\">è§¦å‘Â LocalStorageÂ æ›´æ–°</button>\n<buttonÂ id=\"s-btn\">è§¦å‘Â SessionStorageÂ æ›´æ–°</button>\n<script>\nÂ Â window.onstorageÂ =Â function(e)Â {\nÂ Â Â Â console.log(`TheÂ ${e.key}Â Â keyÂ hasÂ beenÂ changedÂ fromÂ ${e.oldValue}Â Â toÂ Â ${e.newValue}Â .`);\nÂ Â };\n\nÂ Â document.getElementById('tab').onclickÂ =Â functionÂ ()Â {\nÂ Â Â Â window.open('xxx');\nÂ Â }\n\nÂ Â document.getElementById('l-btn').onclickÂ =Â functionÂ ()Â {\nÂ Â Â Â localStorage.setItem('storage1',Â Date.now())\nÂ Â }\n\nÂ Â document.getElementById('s-btn').onclickÂ =Â functionÂ ()Â {\nÂ Â Â Â sessionStorage.setItem('storage1',Â Date.now())\nÂ }\n<\/script>\n\n")])])]),n("p",[n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d705b1fcf685468ca1172c288f8e212a~tplv-k3u1fbpfcp-zoom-1.image",alt:"onstorage.gif"}})]),e._v(" "),n("p",[n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a6e172b8233a4d8b8afe9f17cb5b82b4~tplv-k3u1fbpfcp-zoom-1.image",alt:"onstorage1.gif"}})]),e._v(" "),n("h3",{attrs:{id:"tips"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#tips"}},[e._v("#")]),e._v(" Tips")]),e._v(" "),n("ol",[n("li",[e._v("è¯¥äº‹ä»¶ä¸åœ¨å¯¼è‡´æ•°æ®å˜åŒ–çš„å½“å‰é¡µé¢è§¦å‘ï¼ˆå¦‚æœæµè§ˆå™¨åŒæ—¶æ‰“å¼€ä¸€ä¸ªåŸŸåä¸‹é¢çš„å¤šä¸ªé¡µé¢ï¼Œå½“å…¶ä¸­çš„ä¸€ä¸ªé¡µé¢æ”¹å˜ æ•°æ®æ—¶ï¼Œå…¶ä»–æ‰€æœ‰é¡µé¢çš„ storage äº‹ä»¶ä¼šè¢«è§¦å‘ï¼Œè€ŒåŸå§‹é¡µé¢å¹¶ä¸è§¦å‘ storage äº‹ä»¶ï¼‰ã€‚")]),e._v(" "),n("li",[e._v("sessionStorageï¼ˆâï¼‰ä¸èƒ½è§¦å‘ storage äº‹ä»¶ ï¼Œ localStorageï¼ˆâœ…ï¼‰å¯ä»¥ã€‚")]),e._v(" "),n("li",[e._v("å¦‚æœä¿®æ”¹çš„å€¼æœªå‘ç”Ÿæ”¹å˜ï¼Œå°†ä¸ä¼šè§¦å‘ onstorage äº‹ä»¶ã€‚")]),e._v(" "),n("li",[e._v("ä¼˜ç‚¹ï¼šæµè§ˆå™¨æ”¯æŒæ•ˆæœå¥½ã€APIç›´è§‚ã€æ“ä½œç®€å•ã€‚ç¼ºç‚¹ï¼šéƒ¨åˆ†æµè§ˆå™¨éšèº«æ¨¡å¼ä¸‹ï¼Œæ— æ³•è®¾ç½® localStorageã€‚å¦‚safariï¼Œè¿™æ ·ä¹Ÿå°±å¯¼è‡´ onstrage äº‹ä»¶æ— æ³•ä½¿ç”¨ã€‚")])]),e._v(" "),n("blockquote",[n("p",[e._v("é™¤å¼€å°‘æ•°æƒ…å†µï¼ŒlocalStorageçš„å…¼å®¹æ€§ä¸é”™ï¼Œå°±å½“å‰å›½å†…çš„æƒ…å†µï¼Œå·²ç»åŸºæœ¬æ²¡æœ‰é—®é¢˜äº†ã€‚localStorage çš„åŸç†å¾ˆç®€å•ï¼Œæµè§ˆå™¨ä¸ºæ¯ä¸ªåŸŸååˆ’å‡ºä¸€å—æœ¬åœ°å­˜å‚¨ç©ºé—´ï¼Œç”¨æˆ·ç½‘é¡µå¯ä»¥é€šè¿‡ localStorage å‘½åç©ºé—´è¿›è¡Œè¯»å†™ã€‚"),n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a475fdf9867443c4baa1ddb91dacc1db~tplv-k3u1fbpfcp-zoom-1.image",alt:"onstorageå…¼å®¹æ€§.png"}})])]),e._v(" "),n("h2",{attrs:{id:"broadcast-channel"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#broadcast-channel"}},[e._v("#")]),e._v(" BroadCast Channel")]),e._v(" "),n("p",[e._v("BroadcastChannel æ¥å£ä»£ç†äº†ä¸€ä¸ªå‘½åé¢‘é“ï¼Œ"),n("strong",[e._v("å¯ä»¥è®©æŒ‡å®š origin ä¸‹çš„ä»»æ„ browsing context æ¥è®¢é˜…å®ƒã€‚å®ƒå…è®¸åŒæºçš„ä¸åŒæµè§ˆå™¨çª—å£ï¼ŒTabé¡µï¼Œframeæˆ–è€… iframe ä¸‹çš„ä¸åŒæ–‡æ¡£ä¹‹é—´ç›¸äº’é€šä¿¡")]),e._v("ã€‚é€šè¿‡è§¦å‘ä¸€ä¸ª message äº‹ä»¶ï¼Œæ¶ˆæ¯å¯ä»¥å¹¿æ’­åˆ°æ‰€æœ‰ç›‘å¬äº†è¯¥é¢‘é“çš„ BroadcastChannel å¯¹è±¡ã€‚")]),e._v(" "),n("p",[e._v("è¯´åˆ° BroadCast Channel ä¸å¾—ä¸è¯´ä¸€ä¸‹ postMessageï¼Œä»–ä»¬äºŒè€…çš„æœ€å¤§åŒºåˆ«å°±åœ¨äº postMessage æ›´åƒæ˜¯ç‚¹å¯¹ç‚¹çš„é€šä¿¡ï¼Œè€Œ BroadCast Channel æ˜¯å¹¿æ’­çš„æ–¹å¼ï¼Œç‚¹åˆ°é¢ã€‚")]),e._v(" "),n("h3",{attrs:{id:"è¯­æ³•-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è¯­æ³•-2"}},[e._v("#")]),e._v(" è¯­æ³•")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("//Â åˆ›å»º\nconstÂ broadcastChannelÂ =Â newÂ BroadcastChannel('channelName');\n\n//Â ç›‘å¬æ¶ˆæ¯\nbroadcastChannel.onmessageÂ =Â function(e)Â {\nÂ Â Â Â console.log('ç›‘å¬æ¶ˆæ¯:',Â e.data);\n};\n\n//Â å‘é€æ¶ˆæ¯\nbroadcastChannel.postMessage('æµ‹è¯•ï¼šä¼ é€æ¶ˆæ¯');\n\n//Â å…³é—­\nbroadcastChannel.close();\n\n")])])]),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("<divÂ id=\"app\"></div>\nÂ Â <buttonÂ id=\"tab\">æ–°å¼€Â Tab</button>\nÂ Â <buttonÂ id=\"l-btn\">å‘é€æ¶ˆæ¯</button>\nÂ Â <buttonÂ id=\"s-btn\">å…³é—­</button>\nÂ Â <script>\nÂ Â Â Â //Â åˆ›å»º\nÂ Â Â Â constÂ broadcastChannelÂ =Â newÂ BroadcastChannel('channelName');\n\nÂ Â Â Â //Â ç›‘å¬æ¶ˆæ¯\nÂ Â Â Â broadcastChannel.onmessageÂ =Â function(e)Â {\nÂ Â Â Â Â Â Â Â console.log('ç›‘å¬æ¶ˆæ¯:',Â e.data);\nÂ Â Â Â };\n\nÂ Â Â Â document.getElementById('tab').onclickÂ =Â functionÂ ()Â {\nÂ Â Â Â Â Â window.open('xxx');\nÂ Â Â Â }\n\nÂ Â Â Â document.getElementById('l-btn').onclickÂ =Â functionÂ ()Â {\nÂ Â Â Â Â Â //Â å‘é€æ¶ˆæ¯\nÂ Â Â Â Â Â broadcastChannel.postMessage('æµ‹è¯•ï¼Œä¼ é€æ¶ˆæ¯ï¼Œæˆ‘å‘é€æ¶ˆæ¯å•¦ã€‚ã€‚ã€‚');\nÂ Â Â Â }\n\nÂ Â Â Â document.getElementById('s-btn').onclickÂ =Â functionÂ ()Â {\nÂ Â Â Â Â Â //Â å…³é—­\nÂ Â Â Â Â Â broadcastChannel.close();\nÂ Â Â Â }\n\nÂ Â <\/script>\n\n")])])]),n("p",[n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6851121a48714918be739dc8ad88aa47~tplv-k3u1fbpfcp-zoom-1.image",alt:"Broadcast Channel.gif"}})]),e._v(" "),n("p",[n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5648e81a30aa4611b6c262f49ae7fcd8~tplv-k3u1fbpfcp-zoom-1.image",alt:"Broadcast Channel1.gif"}})]),e._v(" "),n("h3",{attrs:{id:"tips-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#tips-2"}},[e._v("#")]),e._v(" Tips")]),e._v(" "),n("ol",[n("li",[e._v("ç›‘å¬æ¶ˆæ¯é™¤äº† .onmessage è¿™ç§æ–¹å¼ï¼Œè¿˜å¯ä»¥ ä½¿ç”¨addEventListeneræ¥æ·»åŠ 'message'ç›‘å¬ï¼Œ")]),e._v(" "),n("li",[e._v("å…³é—­é™¤äº†ä½¿ç”¨ Broadcast Channel å®ä¾‹ä¸ºæˆ‘ä»¬æä¾›çš„ close æ–¹æ³•æ¥å…³é—­ Broadcast Channelã€‚æˆ‘ä»¬è¿˜å¯å–æ¶ˆæˆ–è€…ä¿®æ”¹ç›¸åº”çš„'message'äº‹ä»¶ç›‘å¬ã€‚ä¸¤è€…æ˜¯æœ‰åŒºåˆ«çš„ï¼šå–æ¶ˆ'message'ç›‘å¬åªæ˜¯è®©é¡µé¢ä¸å¯¹å¹¿æ’­æ¶ˆæ¯è¿›è¡Œå“åº”ï¼ŒBroadcast Channel ä»ç„¶å­˜åœ¨ï¼›è€Œè°ƒç”¨ close æ–¹æ³•ä¼šåˆ‡æ–­ä¸ Broadcast Channel çš„è¿æ¥ï¼Œæµè§ˆå™¨æ‰èƒ½å¤Ÿå°è¯•å›æ”¶è¯¥å¯¹è±¡ï¼Œå› ä¸ºæ­¤æ—¶æµè§ˆå™¨æ‰ä¼šçŸ¥é“ç”¨æˆ·å·²ç»ä¸éœ€è¦ä½¿ç”¨å¹¿æ’­é¢‘é“äº†ã€‚")]),e._v(" "),n("li",[e._v("å…¼å®¹æ€§ï¼šå¦‚æœä¸ä½¿ç”¨ IE å’Œ sf on iOS æµè§ˆå™¨ï¼Œå…¼å®¹æ€§è¿˜æ˜¯å¯ä»¥çš„ã€‚")])]),e._v(" "),n("p",[n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8a33f43cb3154d5082bcb4c4a1819ef0~tplv-k3u1fbpfcp-zoom-1.image",alt:"BroadCast Channelå…¼å®¹æ€§.png"}})]),e._v(" "),n("h2",{attrs:{id:"service-worker"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#service-worker"}},[e._v("#")]),e._v(" Service Worker")]),e._v(" "),n("p",[e._v("Service Worker æ˜¯ä¸€ä¸ªå¯ä»¥é•¿æœŸè¿è¡Œåœ¨åå°çš„ Workerï¼Œèƒ½å¤Ÿå®ç°ä¸é¡µé¢çš„åŒå‘é€šä¿¡ã€‚å¤šé¡µé¢å…±äº«é—´çš„ Service Worker å¯ä»¥å…±äº«ï¼Œå°† Service Worker ä½œä¸ºæ¶ˆæ¯çš„å¤„ç†ä¸­å¿ƒï¼ˆä¸­å¤®ç«™ï¼‰å³å¯å®ç°å¹¿æ’­æ•ˆæœã€‚")]),e._v(" "),n("h3",{attrs:{id:"è¯­æ³•-3"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è¯­æ³•-3"}},[e._v("#")]),e._v(" è¯­æ³•")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("<divÂ id=\"app\"></div>\n<buttonÂ id=\"tab\">æ–°å¼€Â Tab</button>\n<buttonÂ id=\"l-btn\">å‘é€æ¶ˆæ¯</button>\n<script>\nÂ Â /*Â åˆ¤æ–­å½“å‰æµè§ˆå™¨æ˜¯å¦æ”¯æŒserviceWorkerÂ */\nÂ Â ifÂ ('serviceWorker'Â inÂ navigator)Â {\nÂ Â Â Â /*Â å½“é¡µé¢åŠ è½½å®Œæˆå°±åˆ›å»ºä¸€ä¸ªserviceWorkerÂ */\nÂ Â Â Â window.addEventListener('load',Â functionÂ ()Â {\nÂ Â Â Â Â Â /*Â åˆ›å»ºå¹¶æŒ‡å®šå¯¹åº”çš„æ‰§è¡Œå†…å®¹Â */\nÂ Â Â Â Â Â /*Â scopeÂ å‚æ•°æ˜¯å¯é€‰çš„ï¼Œå¯ä»¥ç”¨æ¥æŒ‡å®šä½ æƒ³è®©Â serviceÂ workerÂ æ§åˆ¶çš„å†…å®¹çš„å­ç›®å½•ã€‚åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬æŒ‡å®šäº†Â '/'ï¼Œè¡¨ç¤ºÂ æ ¹ç½‘åŸŸä¸‹çš„æ‰€æœ‰å†…å®¹ã€‚è¿™ä¹Ÿæ˜¯é»˜è®¤å€¼ã€‚*/\nÂ Â Â Â Â Â navigator.serviceWorker.register('./serviceWorker.js',Â {Â scope:Â './'Â })\nÂ Â Â Â Â Â Â Â .then(functionÂ (registration)Â {\nÂ Â Â Â Â Â Â Â console.log('ServiceWorkerÂ registrationÂ successfulÂ withÂ scope:Â ',Â registration.scope);\nÂ Â Â Â Â Â })\nÂ Â Â Â Â Â Â Â .catch(functionÂ (err)Â {\nÂ Â Â Â Â Â Â Â console.log('ServiceWorkerÂ registrationÂ failed:Â ',Â err);\nÂ Â Â Â Â Â });\nÂ Â Â Â });\n\nÂ Â Â Â //Â ç›‘å¬æ¶ˆæ¯\nÂ Â Â Â navigator.serviceWorker.addEventListener('message',Â functionÂ (e)Â {\nÂ Â Â Â Â Â constÂ dataÂ =Â e.data;\nÂ Â Â Â Â Â console.log('æˆ‘æ¥å—åˆ°æ¶ˆæ¯äº†ï¼š',Â data);\nÂ Â Â Â });\n\nÂ Â Â Â document.getElementById('l-btn').onclickÂ =Â functionÂ ()Â {\nÂ Â Â Â Â Â navigator.serviceWorker.controllerÂ &&Â navigator.serviceWorker.controller.postMessage('æµ‹è¯•ï¼Œä¼ é€æ¶ˆæ¯ï¼Œæˆ‘å‘é€æ¶ˆæ¯å•¦ã€‚ã€‚ã€‚');\nÂ Â Â Â };\nÂ Â }\n<\/script>\n\n")])])]),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("/*Â ç›‘å¬å®‰è£…äº‹ä»¶ï¼ŒinstallÂ äº‹ä»¶ä¸€èˆ¬æ˜¯è¢«ç”¨æ¥è®¾ç½®ä½ çš„æµè§ˆå™¨çš„ç¦»çº¿ç¼“å­˜é€»è¾‘Â */\nthis.addEventListener('install',Â functionÂ (event)Â {\nÂ Â /*Â é€šè¿‡è¿™ä¸ªæ–¹æ³•å¯ä»¥é˜²æ­¢ç¼“å­˜æœªå®Œæˆï¼Œå°±å…³é—­serviceWorkerÂ */\nÂ Â event.waitUntil(\nÂ Â Â Â /*Â åˆ›å»ºä¸€ä¸ªåå«V1çš„ç¼“å­˜ç‰ˆæœ¬Â */\nÂ Â Â Â caches.open('v1').then(functionÂ (cache)Â {\nÂ Â Â Â Â Â /*Â æŒ‡å®šè¦ç¼“å­˜çš„å†…å®¹ï¼Œåœ°å€ä¸ºç›¸å¯¹äºè·ŸåŸŸåçš„è®¿é—®è·¯å¾„Â */\nÂ Â Â Â Â Â returnÂ cache.addAll(['./index.html']);\nÂ Â Â Â })\nÂ Â );\n});\n\n/*Â æ³¨å†Œfetchäº‹ä»¶ï¼Œæ‹¦æˆªå…¨ç«™çš„è¯·æ±‚Â */\nthis.addEventListener('fetch',Â functionÂ (event)Â {\nÂ Â event.respondWith(\nÂ Â Â Â //Â magicÂ goesÂ here\n\nÂ Â Â Â /*Â åœ¨ç¼“å­˜ä¸­åŒ¹é…å¯¹åº”è¯·æ±‚èµ„æºç›´æ¥è¿”å›Â */\nÂ Â Â Â caches.match(event.request)\nÂ Â );\n});\n\n/*Â ç›‘å¬æ¶ˆæ¯ï¼Œé€šçŸ¥å…¶ä»–Â TabÂ é¡µé¢Â */\nthis.addEventListener('message',Â function(event)Â {\nÂ Â this.clients.matchAll().then(function(clients)Â {\nÂ Â Â Â clients.forEach(function(client)Â {\nÂ Â Â Â Â Â //Â è¿™é‡Œçš„åˆ¤æ–­ç›®çš„æ˜¯è¿‡æ»¤æ‰å½“å‰Â TabÂ é¡µé¢ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Â visibilityStateÂ çš„çŠ¶æ€æ¥åˆ¤æ–­\nÂ Â Â Â Â Â if(!client.focused)Â {\nÂ Â Â Â Â Â Â Â client.postMessage(event.data)\nÂ Â Â Â Â Â }\nÂ Â Â Â })\nÂ Â })\n})\n\n")])])]),n("p",[n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/93564ceb89b14fecb5ee1df19eb6f481~tplv-k3u1fbpfcp-zoom-1.image",alt:"Service Worker.gif"}})]),e._v(" "),n("p",[n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/09a67a15b1e542a7a828e9d1c9b5ecb5~tplv-k3u1fbpfcp-zoom-1.image",alt:"Service Worker1.gif"}})]),e._v(" "),n("h3",{attrs:{id:"tips-3"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#tips-3"}},[e._v("#")]),e._v(" Tips")]),e._v(" "),n("ol",[n("li",[e._v("Service workers æœ¬è´¨ä¸Šå……å½“ Web åº”ç”¨ç¨‹åºã€æµè§ˆå™¨ä¸ç½‘ç»œï¼ˆå¯ç”¨æ—¶ï¼‰ä¹‹é—´çš„ä»£ç†æœåŠ¡å™¨ã€‚æ‰€ä»¥æœ¬è´¨ä¸Šæ¥è¯´ Service Worker å¹¶ä¸è‡ªåŠ¨å…·å¤‡â€œå¹¿æ’­é€šä¿¡â€çš„åŠŸèƒ½ï¼Œéœ€è¦æ”¹é€  Service Worker æ·»åŠ äº›ä»£ç ï¼Œå°†å…¶æ”¹é€ æˆæ¶ˆæ¯ä¸­è½¬ç«™ã€‚åœ¨ Service Worker ä¸­ç›‘å¬äº†messageäº‹ä»¶ï¼Œè·å–é¡µé¢å‘é€çš„ä¿¡æ¯ã€‚ç„¶åé€šè¿‡ self.clients.matchAll() è·å–å½“å‰æ³¨å†Œäº† Service Worker çš„æ‰€æœ‰é¡µé¢ï¼Œé€šè¿‡è°ƒç”¨æ¯ä¸ªçš„ postMessage æ–¹æ³•ï¼Œå‘é¡µé¢å‘é€æ¶ˆæ¯ã€‚è¿™æ ·å°±æŠŠä»ä¸€å¤„ï¼ˆæŸä¸ªTabé¡µé¢ï¼‰æ”¶åˆ°çš„æ¶ˆæ¯é€šçŸ¥ç»™äº†å…¶ä»–é¡µé¢ã€‚")]),e._v(" "),n("li",[e._v("å…¼å®¹æ€§ï¼šIE å…¨å†›è¦†æ²¡ï¼Œå…¶ä»–æµè§ˆå™¨è¿˜è¡Œï¼Œæ•´ä½“æ¥è¯´ä¸€èˆ¬ã€‚")])]),e._v(" "),n("p",[n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4c0477f909d3451e9155d1beabb1e30f~tplv-k3u1fbpfcp-zoom-1.image",alt:"Service Workerå…¼å®¹æ€§.png"}})]),e._v(" "),n("h2",{attrs:{id:"open-opener"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#open-opener"}},[e._v("#")]),e._v(" open & opener")]),e._v(" "),n("p",[e._v("å½“æˆ‘ä»¬ ç³»ç»Ÿä¸­é€šè¿‡ window.open æ‰“å¼€ä¸€ä¸ªæ–°é¡µé¢æ—¶ï¼Œwindow.open æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªè¢«æ‰“å¼€é¡µé¢çš„å¼•ç”¨ï¼Œè€Œè¢«æ‰“å¼€é¡µé¢åˆ™å¯ä»¥é€šè¿‡ window.opener è·å–åˆ°æ‰“å¼€å®ƒçš„é¡µé¢çš„å¼•ç”¨ï¼ˆå½“ç„¶è¿™æ˜¯åœ¨æ²¡æœ‰æŒ‡å®šnoopenerçš„æƒ…å†µä¸‹ï¼‰ã€‚")]),e._v(" "),n("h3",{attrs:{id:"ç•ªå¤–å…³äº-noopener"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç•ªå¤–å…³äº-noopener"}},[e._v("#")]),e._v(" ç•ªå¤–å…³äº noopener")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('<aÂ href="https://google.com"Â target="_blank">Google</a>\n\n')])])]),n("p",[e._v("æˆ‘ä»¬åœ¨ç³»ç»Ÿä¸­ç»å¸¸ä¼šè¿™æ ·ä½¿ç”¨ a æ ‡ç­¾è·³è½¬åˆ°ç¬¬ä¸‰æ–¹ç½‘ç«™ï¼Œæœ‰æ—¶ï¼Œå½“æ‚¨å•å‡»ç½‘ç«™ä¸Šçš„é“¾æ¥æ—¶ï¼Œè¯¥é“¾æ¥å°†åœ¨æ–°é€‰é¡¹å¡ä¸­æ‰“å¼€ï¼Œä½†æ—§é€‰é¡¹å¡ä¹Ÿä¼šè¢«é‡å®šå‘åˆ°å…¶ä»–ç½‘ç»œé’“é±¼ç½‘ç«™ï¼Œå®ƒä¼šè¦æ±‚æ‚¨ç™»å½•æˆ–å¼€å§‹å°†ä¸€äº›æ¶æ„è½¯ä»¶ä¸‹è½½åˆ°æ‚¨çš„è®¾å¤‡ã€‚è¿™æ ·å­˜åœ¨ä¸€å®šçš„å®‰å…¨éšæ‚£ï¼Œæ­¤æ—¶åœ¨æ–°æ‰“å¼€çš„é¡µé¢ä¸­å¯é€šè¿‡ window.opener è·å–åˆ°æºé¡µé¢çš„ window å¯¹è±¡ï¼Œ è¿™å°±åŸ‹ä¸‹äº†å®‰å…¨éšæ‚£ã€‚ æ¯”å¦‚ï¼š")]),e._v(" "),n("ul",[n("li",[e._v("ä½ è‡ªå·±çš„ç½‘ç«™ Aï¼Œç‚¹å‡»å¦‚ä¸Šé“¾æ¥æ‰“å¼€äº†ç¬¬ä¸‰æ–¹ç½‘ç«™ Bã€‚")]),e._v(" "),n("li",[e._v("æ­¤æ—¶ç½‘ç«™ B å¯ä»¥é€šè¿‡ window.opener è·å–åˆ° A ç½‘ç«™çš„ window å¯¹è±¡ã€‚")]),e._v(" "),n("li",[e._v("ç„¶åé€šè¿‡ window.opener.location.href = '"),n("a",{attrs:{href:"https://link.juejin.cn/?target=http%3A%2F%2Fwww.baidu.com",title:"http://www.baidu.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("www.baidu.com"),n("OutboundLink")],1),e._v("' è¿™ç§å½¢å¼è·³è½¬åˆ°ä¸€ä¸ªé’“é±¼ç½‘ç«™ï¼Œæ³„éœ²ç”¨æˆ·ä¿¡æ¯ã€‚")])]),e._v(" "),n("p",[e._v('ä¸ºäº†é¿å…è¿™æ ·çš„é—®é¢˜ï¼Œå¯ä»¥æ·»åŠ å¼•å…¥äº† rel="noopener" å±æ€§ï¼Œ è¿™æ ·æ–°æ‰“å¼€çš„é¡µé¢ä¾¿è·å–ä¸åˆ°æ¥æºé¡µé¢çš„ window å¯¹è±¡äº†ï¼Œ æ­¤æ—¶ window.opener çš„å€¼æ˜¯ nullã€‚')]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('<aÂ href="https://google.com"Â rel="noopener"Â target="_blank">Google</a>\n\n')])])]),n("p",[e._v('ä½†æ˜¯ç”±äºä¸€äº›è€çš„æµè§ˆå™¨å¹¶ä¸æ”¯æŒ noopener ï¼Œé€šå¸¸ noopener å’Œ noreferrer ä¼šåŒæ—¶è®¾ç½®ï¼Œ rel="noopener noreferrer"ã€‚')]),e._v(" "),n("h3",{attrs:{id:"è¯­æ³•-4"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è¯­æ³•-4"}},[e._v("#")]),e._v(" è¯­æ³•")]),e._v(" "),n("p",[e._v("å›åˆ°ä¸»é¢˜ï¼Œä½¿ç”¨ window.opener å¦‚ä½•å®ç°è·¨é¡µé¢é€šä¿¡äº†ã€‚")]),e._v(" "),n("ul",[n("li",[e._v("æ”¶é›†å¯¹è±¡")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("//Â æ”¶é›†Â windowÂ å¯¹è±¡ï¼šå•ä¸ªæ‰“å¼€é¡µé¢\nconstÂ windowOpenÂ =Â window.open('xxx');\n\n//Â æ”¶é›†Â windowÂ å¯¹è±¡ï¼šå¤šä¸ªæ‰“å¼€é¡µé¢ï¼Œæ‰“å¼€ä¸€ä¸ªé¡µé¢å°±éœ€è¦å°†æ‰“å¼€çš„Â windowÂ å¯¹è±¡æ”¶é›†èµ·æ¥ï¼Œä»¥ä¾¿äºå‘å¸ƒå¹¿æ’­\nconstÂ windowOpensÂ =Â [];\nconstÂ windowOpenÂ =Â window.open('xxx');\nwindowOpens.push(windowOpen);\n\n")])])]),n("ul",[n("li",[e._v("å‘é€æ¶ˆæ¯")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("//Â å‘é€æ¶ˆæ¯ï¼šå•ä¸ªé¡µé¢\nwindowOpen.postMessage(data);\n\n//Â å‘é€æ¶ˆæ¯ï¼šå¤šä¸ªé¡µé¢\nwindowOpens.forEach((window)Â =>Â window.postMessage(data));\næ¥å—æ¶ˆæ¯ï¼Œå¯¹äºæ¥å—æ¶ˆæ¯æ¥è¯´ï¼Œå¯èƒ½åªæ˜¯æ¥å—æ¶ˆæ¯ï¼Œä½†æ˜¯å¯èƒ½æ¥å—æ¶ˆæ¯çš„é¡µé¢ä¹Ÿæ‰“å¼€äº†é¡µé¢ï¼Œè¿™ç§æƒ…å†µéœ€è¦å°†æ¶ˆæ¯ç»§ç»­ä¼ é€’ä¸‹å»\nwindow.addEventListener('message',Â functionÂ (e)Â {\nÂ Â Â Â constÂ dataÂ =Â e.data;\nÂ Â Â Â console.log(data);\nÂ Â Â Â windowOpens.forEach((window)Â =>Â window.postMessage(data));\n});\n\n")])])]),n("h3",{attrs:{id:"tips-4"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#tips-4"}},[e._v("#")]),e._v(" Tips")]),e._v(" "),n("ol",[n("li",[e._v("åœ¨æ”¶é›†åˆ°çš„ window å¯¹è±¡ä¸­ï¼Œå¯èƒ½æœ‰çš„ Tab çª—å£è¢«å…³é—­äº†ï¼Œè¿™ç§æƒ…å†µä¸‹çš„ Tab ä¸éœ€è¦è¿›è¡Œæ¶ˆæ¯ä¼ é€’ã€‚")]),e._v(" "),n("li",[e._v("å¯¹äºæ¥å—æ¶ˆæ¯çš„ä¸€æ–¹æ¥è¯´ï¼Œéœ€è¦ç»§ç»­ä¼ é€’æ¶ˆæ¯ï¼Œä½†æ˜¯è¿™é‡Œå­˜åœ¨ä¸€ä¸ªé—®é¢˜å°±æ˜¯æ¶ˆæ¯å›ä¼ ï¼Œå¯èƒ½å‡ºç°ä¸¤è€…ä¹‹é—´æ¶ˆæ¯çš„æ­»å¾ªç¯ä¼ é€’ã€‚")]),e._v(" "),n("li",[e._v("è¿™ç§æ–¹å¼ï¼Œç±»ä¼¼å‡»é¼“ä¼ èŠ±ï¼Œä¸€ä¸ªä¼ ä¸€ä¸ªï¼Œä¼ é€’çš„æ¶ˆæ¯ä»å‰å¾€åï¼Œä¸€æ¡é”é“¾ã€‚")]),e._v(" "),n("li",[e._v("ä½†æ˜¯å¦‚æœé¡µé¢ä¸æ˜¯é€šè¿‡ä¸€ä¸ªé¡µé¢æ‰“å¼€çš„ï¼Œè€Œä¸”ç›´æ¥æ‰“å¼€çš„ï¼Œæˆ–è€…ä»ä¸‰æ–¹ç½‘ç«™è·³è½¬çš„ï¼Œé‚£è¿™æ¡é”é“¾å°†æ–­å¼€ã€‚"),n("strong",[e._v("æ‰€ä»¥è¿™ç§æ–¹å¼åŸºæœ¬åªåšäº†è§£ï¼Œé—®é¢˜å¤ªå¤šï¼Œå¯ä¸åšå‚è€ƒã€‚")])])]),e._v(" "),n("p",[e._v("å®Œå–„çš„ä»£ç å¦‚ä¸‹ï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("<buttonÂ id=\"tab\">æ–°å¼€Â Tab</button>\n<buttonÂ id=\"l-btn\">å‘é€æ¶ˆæ¯</button>\n<script>\nÂ Â //Â æ”¶é›†Â windowÂ å¯¹è±¡ï¼šå¤šä¸ªæ‰“å¼€é¡µé¢ï¼Œæ‰“å¼€ä¸€ä¸ªé¡µé¢å°±éœ€è¦å°†æ‰“å¼€çš„Â windowÂ å¯¹è±¡æ”¶é›†èµ·æ¥ï¼Œä»¥ä¾¿äºå‘å¸ƒå¹¿æ’­\nÂ Â letÂ windowOpensÂ =Â [];\nÂ Â document.getElementById('tab').onclickÂ =Â functionÂ ()Â {\nÂ Â Â Â //Â IPÂ åœ°å€ä¸ºæœ¬åœ°çš„æœåŠ¡\nÂ Â Â Â constÂ windowOpenÂ =Â window.open('http://127.0.0.1:5500/CrossPageCommunication/open&opener.html');\nÂ Â Â Â windowOpens.push(windowOpen);\nÂ Â }\n\nÂ Â document.getElementById('l-btn').onclickÂ =Â functionÂ ()Â {\nÂ Â Â Â constÂ dataÂ =Â {};\nÂ Â Â Â console.log(windowOpens);\nÂ Â Â Â //Â å‘é€æ¶ˆæ¯ä¹‹å‰ï¼Œå…ˆè¿›è¡Œå·²å…³é—­Â TabÂ çš„è¿‡æ»¤\nÂ Â Â Â windowOpensÂ =Â windowOpens.filter((window)Â =>Â !window.closed);\n\nÂ Â Â Â ifÂ (windowOpens.lengthÂ >Â 0)Â {\nÂ Â Â Â Â Â //Â æ•°æ®æ‰“ä¸€ä¸ªæ ‡è®°\nÂ Â Â Â Â Â data.tagÂ =Â false;\nÂ Â Â Â Â Â data.messageÂ =Â 'æµ‹è¯•ï¼Œä¼ é€æ¶ˆæ¯ï¼Œæˆ‘å‘é€æ¶ˆæ¯å•¦ã€‚ã€‚ã€‚'\nÂ Â Â Â Â Â windowOpens.forEach((window)Â =>Â window.postMessage(data));\nÂ Â Â Â }\nÂ Â Â Â ifÂ (window.openerÂ &&Â !window.opener.closed)Â {\nÂ Â Â Â Â Â data.tagÂ =Â true;\nÂ Â Â Â Â Â window.opener.postMessage(data);\nÂ Â Â Â }\nÂ Â }\n\nÂ Â window.addEventListener('message',Â functionÂ (e)Â {\nÂ Â Â Â constÂ dataÂ =Â e.data;\nÂ Â Â Â console.log('æˆ‘æ¥å—åˆ°æ¶ˆæ¯äº†ï¼š',Â data.message);\nÂ Â Â Â //Â é¿å…æ¶ˆæ¯å›ä¼ \nÂ Â Â Â ifÂ (window.openerÂ &&Â !window.opener.closedÂ &&Â data.tag)Â {\nÂ Â Â Â Â Â window.opener.postMessage(data);\nÂ Â Â Â }\nÂ Â Â Â //Â è¿‡æ»¤æ‰å·²ç»å…³é—­çš„Â Tab\nÂ Â Â Â windowOpensÂ =Â windowOpens.filter((window)Â =>Â !window.closed);\nÂ Â Â Â //Â é¿å…æ¶ˆæ¯å›ä¼ \nÂ Â Â Â ifÂ (windowOpensÂ &&Â !data.tag)Â {\nÂ Â Â Â Â Â windowOpens.forEach((window)Â =>Â window.postMessage(data));\nÂ Â Â Â }\nÂ Â });\n<\/script>\n\n")])])]),n("p",[n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6f63a0081c5c4052b4cf27a5be90e599~tplv-k3u1fbpfcp-zoom-1.image",alt:"image.png"}})]),e._v(" "),n("h2",{attrs:{id:"sharedworker"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sharedworker"}},[e._v("#")]),e._v(" SharedWorker")]),e._v(" "),n("p",[e._v("SharedWorker æ¥å£ä»£è¡¨ä¸€ç§ç‰¹å®šç±»å‹çš„ workerï¼Œå¯ä»¥ä»å‡ ä¸ªæµè§ˆä¸Šä¸‹æ–‡ä¸­è®¿é—®ï¼Œä¾‹å¦‚å‡ ä¸ªçª—å£ã€iframe æˆ–å…¶ä»– workerã€‚å®ƒä»¬å®ç°ä¸€ä¸ªä¸åŒäºæ™®é€š worker çš„æ¥å£ï¼Œå…·æœ‰ä¸åŒçš„å…¨å±€ä½œç”¨åŸŸ, SharedWorkerGlobalScopeã€‚")]),e._v(" "),n("h3",{attrs:{id:"è¯­æ³•-5"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è¯­æ³•-5"}},[e._v("#")]),e._v(" è¯­æ³•")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('//Â åˆ›å»ºå…±äº«çº¿ç¨‹å¯¹è±¡\nletÂ workerÂ =Â newÂ SharedWorker("./sharedWorker.js");\n\n//Â æ‰‹åŠ¨å¯åŠ¨ç«¯å£\nworker.port.start();\n\n//Â å¤„ç†ä»Â workerÂ è¿”å›çš„æ¶ˆæ¯\nÂ worker.port.onmessageÂ =Â functionÂ (val)Â {\nÂ Â Â Â ...\nÂ };\n\n')])])]),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("<buttonÂ id=\"tab\">æ–°å¼€Â Tab</button>\n<buttonÂ id=\"l-btn\">ç‚¹èµ</button>\n<p><span id=\"likedCount\">è¿˜æ²¡æœ‰äººç‚¹èµ</span></span>ğŸ‘</p>\n<script>\nÂ letÂ likedCountElÂ =Â document.querySelector(\"#likedCount\");\n\nÂ letÂ workerÂ =Â newÂ SharedWorker(\"./sharedWorker.js\");\n\nÂ console.log('worker.port',Â worker.port);\n\nÂ worker.port.start();\n\nÂ //Â ç›‘å¬æ¶ˆæ¯\nÂ worker.port.onmessageÂ =Â functionÂ (val)Â {\nÂ Â Â likedCountEl.innerHTMLÂ =Â val.data;\nÂ };\n\nÂ document.getElementById('tab').onclickÂ =Â functionÂ ()Â {\nÂ Â Â //Â IPÂ åœ°å€ä¸ºæœ¬åœ°èµ·çš„æœåŠ¡\nÂ Â Â constÂ windowOpenÂ =Â window.open('http://127.0.0.1:5500/CrossPageCommunication/sharedWorker/index.html');\nÂ }\n\nÂ document.getElementById('l-btn').onclickÂ =Â functionÂ ()Â {\nÂ Â Â worker.port.postMessage('ç‚¹èµäº†');\nÂ };\n<\/script>\n//Â ./sharedWorker.js\nletÂ aÂ =Â 666;\n\nconsole.log('shared-worker');\nonconnectÂ =Â functionÂ (e)Â {\nÂ constÂ portÂ =Â e.ports[0];\nÂ console.log('shared-workerÂ connect');\n\nÂ //Â ä¸èƒ½ä½¿ç”¨è¿™ç§æ–¹å¼ç›‘å¬äº‹ä»¶\nÂ //Â port.addEventListener('message',Â ()Â =>Â {\nÂ //Â Â Â port.postMessage(++a);\nÂ //Â });\n\nÂ port.postMessage(a);\n\nÂ port.onmessageÂ =Â ()Â =>Â {\nÂ Â Â port.postMessage(++a);\nÂ };\nÂ console.log('å½“å‰ç‚¹èµæ¬¡æ•°:',Â a);\n};\n\n")])])]),n("p",[n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fa5d1912da564ad3ae180b8e1fd85b97~tplv-k3u1fbpfcp-zoom-1.image",alt:"image.png"}})]),e._v(" "),n("h3",{attrs:{id:"tips-5"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#tips-5"}},[e._v("#")]),e._v(" Tips")]),e._v(" "),n("ol",[n("li",[e._v("å¦‚æœè¦ä½¿ SharedWorker è¿æ¥åˆ°å¤šä¸ªä¸åŒçš„é¡µé¢ï¼Œè¿™äº›é¡µé¢å¿…é¡»æ˜¯åŒæºçš„ï¼ˆç›¸åŒçš„åè®®ã€host ä»¥åŠç«¯å£ï¼‰ã€‚")]),e._v(" "),n("li",[e._v("Shared Worker åœ¨å®ç°è·¨é¡µé¢é€šä¿¡æ—¶çš„ï¼Œå®ƒæ— æ³•ä¸»åŠ¨é€šçŸ¥æ‰€æœ‰é¡µé¢ï¼Œéœ€è¦åˆ·æ–°é¡µé¢æˆ–è€…æ˜¯å®šæ—¶ä»»åŠ¡æ¥æ£€æŸ¥æ˜¯å¦æœ‰æ–°çš„æ¶ˆæ¯ã€‚åœ¨ä¾‹å­ä¸­æˆ‘æ˜¯æ‰‹åŠ¨åˆ·æ–°çš„ï¼Œå½“ç„¶å¯ä»¥ä½¿ç”¨ setInterval æ¥å®šæ—¶åˆ·æ–°ã€‚")]),e._v(" "),n("li",[e._v("å¦‚æœéœ€è¦è°ƒè¯• SharedWorkerï¼Œä½¿ç”¨ chrome://inspect/#workers")])]),e._v(" "),n("p",[n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8bcd88e763984dedaa06d959ccab62df~tplv-k3u1fbpfcp-zoom-1.image",alt:"image.png"}})]),e._v(" "),n("p",[n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ce57702bb83d4b188bec2192054cbaa6~tplv-k3u1fbpfcp-zoom-1.image",alt:"image.png"}})]),e._v(" "),n("ol",[n("li",[e._v("sharedWorker.js ä¸èƒ½ä½¿ç”¨ .addEventListener æ¥ç›‘å¬ message äº‹ä»¶ï¼Œç›‘å¬æ— æ•ˆã€‚ å…¼å®¹æ€§ä¸€èˆ¬ã€‚")])]),e._v(" "),n("p",[n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/952b571f96864f19a19c07045994789f~tplv-k3u1fbpfcp-zoom-1.image",alt:"image.png"}})]),e._v(" "),n("h2",{attrs:{id:"æ€»ç»“"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“"}},[e._v("#")]),e._v(" æ€»ç»“")]),e._v(" "),n("p",[e._v("åœ¨ä¸Šé¢åˆ—ä¸¾äº†äº”ç§å‰ç«¯è·¨é¡µé¢é€šä¿¡çš„æ–¹å¼ï¼Œå½“ç„¶å¯¹å‰ç«¯æ¥è¯´è¿œè¿œä¸æ­¢è¿™äº”ç§æ–¹å¼ï¼Œè¿˜æœ‰å…¶ä»–æ–¹æ¡ˆä¾‹å¦‚ï¼šä½¿ç”¨ hashchangeã€cookieã€Websocketã€postMessage éƒ½æ˜¯å¯ä»¥çš„ã€‚æ–‡ç« ä¸­åªæ˜¯åˆ—ä¸¾äº†éƒ¨åˆ†ã€‚å¹¶ä¸”æ–‡ç« ä¸­çš„æ–¹æ¡ˆéƒ½æ˜¯é’ˆå¯¹åŒæºçš„ Tabã€‚")]),e._v(" "),n("p",[e._v("æ–‡ç« çš„å‰ä¸‰ç§è§£å†³æ–¹å¼ä¸è®ºæ˜¯ Broadcast Channelï¼Œè¿˜æ˜¯ Service Worker ï¼Œæˆ–æ˜¯ storage äº‹ä»¶ï¼Œå…¶éƒ½æ˜¯â€œå¹¿æ’­æ¨¡å¼â€ï¼šä¸€ä¸ªé¡µé¢å°†æ¶ˆæ¯é€šçŸ¥ç»™ä¸€ä¸ªâ€œä¸­å¤®ç«™â€ï¼Œå†ç”±â€œä¸­å¤®ç«™â€é€šçŸ¥ç»™å„ä¸ªé¡µé¢ã€‚")]),e._v(" "),n("p",[e._v("è€Œå¯¹äº open & opener è¿™ç§æ–¹å¼ï¼Œç±»ä¼¼å‡»é¼“ä¼ èŠ±ï¼Œä¸€ä¸ªä¼ ä¸€ä¸ªï¼Œä¼ é€’çš„æ¶ˆæ¯ä»å‰å¾€åï¼Œä¸€æ¡é”é“¾ã€‚ä½†æ˜¯å¦‚æœé¡µé¢ä¸æ˜¯é€šè¿‡ä¸€ä¸ªé¡µé¢æ‰“å¼€çš„ï¼Œè€Œä¸”ç›´æ¥æ‰“å¼€çš„ï¼Œæˆ–è€…ä»ä¸‰æ–¹ç½‘ç«™è·³è½¬çš„ï¼Œé‚£è¿™æ¡é”é“¾å°†æ–­å¼€ã€‚")]),e._v(" "),n("p",[e._v("Shared Worker çš„æœ€å¤§é—®é¢˜åœ¨äºå®ç°è·¨é¡µé¢é€šä¿¡æ—¶çš„ï¼Œå®ƒæ— æ³•ä¸»åŠ¨é€šçŸ¥æ‰€æœ‰é¡µé¢ï¼Œéœ€è¦åˆ·æ–°é¡µé¢æˆ–è€…æ˜¯å®šæ—¶ä»»åŠ¡æ¥æ£€æŸ¥æ˜¯å¦æœ‰æ–°çš„æ¶ˆæ¯ï¼Œä¹Ÿå°±æ˜¯éœ€è¦é…åˆè½®è¯¢æ¥ä½¿ç”¨ã€‚")]),e._v(" "),n("p",[e._v("æœ€ç»ˆåœ¨æˆ‘ä»¬å›¢é˜Ÿå¯¹äºå‰ç«¯è·¨é¡µé¢é€šä¿¡æœ€åé€‰æ‹©çš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨ onstorageï¼Œä¸»è¦è€ƒé‡çš„ä¸‰ä¸ªæ–¹é¢ï¼š")]),e._v(" "),n("ul",[n("li",[e._v("å…¼å®¹æ€§ã€‚æµè§ˆå™¨æ”¯æŒåº¦ã€‚")]),e._v(" "),n("li",[e._v("é€šç”¨æ€§ã€‚èƒ½å¦è¦†ç›–éœ€æ±‚ã€æ˜¯å¦å…·æœ‰æ‹“å±•æ€§ã€‚")]),e._v(" "),n("li",[e._v("ä¾¿æ·æ€§ã€‚å¼€å‘ä¾¿æ·ç¨‹åº¦ã€‚")])]),e._v(" "),n("p",[e._v("å…¶ä»–æ–¹æ¡ˆåœ¨è¿™ä¸‰ä¸ªæ–¹é¢æ¥è¯´éƒ½æˆ–å¤šæˆ–å°‘å­˜åœ¨ä¸€äº›ç¾ä¸­ä¸è¶³ã€‚")]),e._v(" "),n("p",[n("a",{attrs:{href:"https://juejin.cn/post/7081516964400594951",target:"_blank",rel:"noopener noreferrer"}},[e._v("è½¬è½½äºæ˜é‡‘"),n("OutboundLink")],1)])])}),[],!1,null,null,null);n.default=o.exports}}]);